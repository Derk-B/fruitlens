\section{How to use this?}

You should have stack installed (see \url{https://haskellstack.org/}) and open a terminal in the same folder.
To make it easy to use the model, we have created a web interface. It is recommended to have python and the http library installed to serve the web interface.

\begin{enumerate}
  \item Download all the files from the \texttt{fruits-360\_100x100} directory from \url{https://www.kaggle.com/datasets/moltean/fruits}. Put these files in the root of the project.
  \item Run the training algorithm. You may run the training algorithm in two ways: 
  \begin{enumerate}
      \item Run with GHCi
        \begin{itemize}
          \item Run \verb|stack ghci| 
          \item Load the Convert.lhs file. Run \verb|:l lib/Convert.lhs|. 
          \item Call the convert function. Run \verb|convert|.
        \end{itemize}
      \item Build the binary and run with it
        \begin{itemize}
            \item Run \verb|make build|.
            \item Run \verb|stack exec convert-exe|.
        \end{itemize}
  \end{enumerate}
  \item After some time (can take half an hour depending on your hardware), a \texttt{trained\_model.bin} file should be saved in the root of your project. That binary contains the model weights that you can use to predict fruits.


  \item Run the API server and use that as an interface to detect fruits. You may also run the training algorithm in two ways: 
  \begin{enumerate}
      \item Run with GHCi
        \begin{itemize}
            \item Run \verb |stack ghci|
            \item Load the API.lhs file. Run \verb|:l lib/API.lhs|.
            \item Start the server with: \verb|startServer 8080|
        \end{itemize}
      \item Build the binary and run with it
        \begin{itemize}
            \item Run \verb|make build|.
            \item Run \verb|stack exec fruitlens-exe|.
        \end{itemize}
  \end{enumerate}
    \item Now you should be able to send a Base64 encoded value of a JPG to \url{http://localhost:8080/api/fruitlens}. However, it is easier to use the web interface that we made.
    \item Start the web interface by going into the \texttt{fruitcam-web} directory. The easiest way to run the website is by using Python's built-in \texttt{http.server} module. To do that, run \verb|python3 -m http.server 3000|. You may also use any other web server you prefer. 
    \item Visit \url{http://localhost:3000} in your browser and upload a JPG file.
\end{enumerate}
